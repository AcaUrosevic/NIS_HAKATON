<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Details</title>
    <link rel="stylesheet" href="../styles/details.css">
</head>
<body>
    <h1>Machine Details</h1>
    
    <div class="info-section">
        <!-- Info Block -->
        <div class="info-block" id="info-block">
            <h2>Info</h2>
            <p id="machine-info">Machine Name: <span id="machine-name-info"></span></p>
            <p>Last Tested: <span id="last-tested"></span></p>
            <p>Location: <span id="location"></span></p>
        </div>

        <!-- Failure Type Block -->
        <div class="failure-block" id="failure-block">
            <h2>Failure Type</h2>
            <p>Failure Type: <span id="failure-type"></span></p>
            <p>Next Inspection: <span id="next-inspection"></span></p>
        </div>

        <!-- Validation Block -->
        <div class="validation-block" id="validation-block">
            <h2>Validation</h2>
            <form id="validation-form">
                <label for="date-from">Date From:</label>
                <input type="date" id="date-from" name="date-from"><br><br>

                <label for="date-to">Date To:</label>
                <input type="date" id="date-to" name="date-to"><br><br>

                <label for="parameter">Parameter:</label>
                <select id="parameter" name="parameter">
                    <option value="napon_ab">Napon AB</option>
                    <option value="napon_bc">Napon BC</option>
                    <option value="napon_ca">Napon CA</option>
                    <option value="struja_a">Struja Faza A</option>
                    <option value="struja_b">Struja Faza B</option>
                    <option value="struja_c">Struja Faza C</option>
                    <option value="koef_kap">Koeficijent Kapaciteta</option>
                    <option value="frekvencija">Frekvencija</option>
                    <option value="radno_opterecenje">Radno Opterećenje</option>
                    <option value="aktivna_snaga">Aktivna Snaga</option>
                    <option value="pritisak">Pritisak</option>
                    <option value="temp_motora">Temperatura Motora</option>
                    <option value="temp_busotina">Temperatura u Bušotini</option>
                </select><br><br>

                <button type="button" id="validate-button">Validate</button>
            </form>
        </div>
    </div>

    <div id="graph-modal" class="modal">
        <div class="modal-content">
            <span id="close-modal" class="close">&times;</span>
            <h2>Graph of Measurements</h2>
            <canvas id="measurement-graph"></canvas>
        </div>
    </div>
    
    <!-- Button to open the form for new measurement -->
    <button id="add-measurement-button">Add New Measurement</button>
    
    <!-- Hidden form for new measurement -->
    <div id="measurement-form" style="display:none;">
        <h3>Add New Measurement</h3>
        <form id="new-measurement-form">
            <label>Well: <input type="text" id="well" readonly></label><br>
            <label>Measure Date: <input type="datetime-local" id="measure_date" value=""></label><br>
            <label>Napon AB: <input type="text" id="napon_ab" ></label><br>
            <label>Napon BC: <input type="text" id="napon_bc" ></label><br>
            <label>Napon CA: <input type="text" id="napon_ca" ></label><br>
            <label>Struja Faza A: <input type="text" id="struja_a" ></label><br>
            <label>Struja Faza B: <input type="text" id="struja_b" ></label><br>
            <label>Struja Faza C: <input type="text" id="struja_c" ></label><br>
            <label>Koeficijent Kapaciteta: <input type="text" id="koef_kap" ></label><br>
            <label>Frekvencija: <input type="text" id="frekvencija" ></label><br>
            <label>Radno Opterećenje: <input type="text" id="radno_opterecenje" ></label><br>
            <label>Aktivna Snaga: <input type="text" id="aktivna_snaga" ></label><br>
            <label>Pritisak na Prijemu Pumpe: <input type="text" id="pritisak" ></label><br>
            <label>Temperatura Motora: <input type="text" id="temp_motora" ></label><br>
            <label>Temperatura u Bušotini: <input type="text" id="temp_busotina" ></label><br>
            <button type="submit">Submit</button>
            <button type="button" id="close-measurement-form">Close</button>
        </form>
    </div>

    <a href="index.html">Back to List</a>
    <h2>Measurement Data</h2>
    <table id="measurement-table">
        <thead>
            <tr>
                <th>Measure Date</th>
                <th>Napon AB</th>
                <th>Napon BC</th>
                <th>Napon CA</th>
                <th>Struja A</th>
                <th>Struja B</th>
                <th>Struja C</th>
                <th>Koef. Kapaciteta</th>
                <th>Frekvencija</th>
                <th>Radno Opterećenje</th>
                <th>Aktivna Snaga</th>
                <th>Pritisak</th>
                <th>Temp. Motora</th>
                <th>Temp. Bušotine</th>
            </tr>
        </thead>
        <tbody id="measurement-tbody">
            <!-- Data will be loaded here dynamically -->
        </tbody>
    </table>

    <!-- Pagination controls -->
    <div id="pagination-controls">
        <button id="prev-page">Previous</button>
        <span id="current-page">Page 1</span>
        <button id="next-page">Next</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../scripts/details.js"></script>
</body>
</html>
